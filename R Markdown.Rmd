---
title: "R Markdown"
author: "Megha"
date: "5/18/2021"
output:
  word_document: default
  pdf_document: default
  html_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

This is an R Markdown document. Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents. For more details on using R Markdown see <http://rmarkdown.rstudio.com>.

When you click the **Knit** button a document will be generated that includes both content as well as the output of any embedded R code chunks within the document. You can embed an R code chunk like this:

```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
#comments and coding file
#load data
#https://github.com/nytimes/covid-19-data

us.states.csv <- read.csv("C:/Users/patel_m/OneDrive - US Department of Labor - BLS/Desktop/Presentation/us-states.csv.txt")
us.counties.csv<-read.csv("C:/Users/patel_m/OneDrive - US Department of Labor - BLS/Desktop/Presentation/us-counties.csv.txt")

#Declare Columns as vectors 
Date<-us.states.csv[1]
State<-us.states.csv[2]
FIPS<-us.states.csv[3]
Case<-us.states.csv[4]
Deaths<-us.states.csv[5]

Date<-us.counties.csv[1]
County<-us.counties.csv[2]
State2<-us.counties.csv[3]
FIPS<-us.counties.csv[4]
Case2<-us.counties.csv[5]
Deaths2<-us.counties.csv[6]

#check if character or numeric
sapply(us.states.csv, class)
sapply(us.counties.csv, class)

#Load packages for manipulation

install.packages("ggplot2")
install.packages("tidyverse")
install.packages("dplyr")
install.packages("usmap")


library("ggplot2")
library("tidyverse")
library("dplyr")
library("usmap")

#cleaning and sorting through the data
class(Case)
class(Deaths)
class(Date)

#it is a data frame. change to numeric
num.Case<-as.numeric(unlist(Case))
num.Deaths<-as.numeric(unlist(Deaths))
AS.Date<-as.Date(unlist(Date))
char.State<-as.character(unlist(State))
class(AS.Date)

#print vectors to check data 
num.Case
num.Deaths
AS.Date
char.State

#data cleaning and vector creation for counties data
num.Cases2<-as.numeric(unlist(Case2))
num.Deaths2<-as.numeric(unlist(Deaths2))
AS.Date2<-as.Date(unlist(Date))
char.County<-as.character(unlist(County))
class(AS.Date2)

#print vector to check data 
num.Cases2
num.Deaths2
AS.Date2
char.County

#merge data sets usmap and virus
us_map_data<-merge(us.states.csv, citypop)
us_map_data
us_map_data_2<-merge(us.counties.csv, citypop)
us_map_data_2

#This code sums the death columns automatically.Some images use scientific notation to report cases. Please note that the scale map_df[,values] does not display the number of deaths/cases correctly in the 
#most updated file. This program was written in May 2020 when the cases/death numbers were not quite as large. Best fix for this program is to rescale the x axis using the appropriate scaling

jpeg(file = "C:/Users/patel_m/OneDrive - US Department of Labor - BLS/Desktop/Presentation/Northeast Region Death.jpeg", width = 1050, height = 1050)
map1<-plot_usmap(data=us_map_data, values="deaths", color="white", include = .northeast_region, labels=TRUE,label_color="white")+ theme(legend.position="top")+labs(color="Deaths")
map1
dev.off()

map1

map2
jpeg(file = "C:/Users/patel_m/OneDrive - US Department of Labor - BLS/Desktop/Presentation/East North Central.jpeg", width = 1050, height = 1050)
map2<-plot_usmap(data=us_map_data, values="deaths", color="white", include = .east_north_central, labels=TRUE,label_color="white")+ theme(legend.position="top")+labs(color="Deaths")  
map2
dev.off()

map2

jpeg(file = "C:/Users/patel_m/OneDrive - US Department of Labor - BLS/Desktop/Presentation/Northeast Region Cases.jpeg", width = 1050, height = 1050)
map3<-plot_usmap(data=us_map_data, values="cases", color="white", include = .northeast_region, labels=TRUE,label_color="white")+ theme(legend.position="top")+labs(color="Cases") 
map3
dev.off()

map3

jpeg(file = "C:/Users/patel_m/OneDrive - US Department of Labor - BLS/Desktop/Presentation/Mid Atlantic Death.jpeg", width = 1050, height = 1050)
map4<-plot_usmap(data=us_map_data, values="deaths", color="white", include = .mid_atlantic, labels=TRUE,label_color="white")+ theme(legend.position="top")+labs(color="Deaths")
map4
dev.off()

map4

jpeg(file = "C:/Users/patel_m/OneDrive - US Department of Labor - BLS/Desktop/Presentation/Mid Atlantic Cases.jpeg", width = 1050, height = 1050)
map5<-plot_usmap(data=us_map_data, values="cases", color="white", include = .mid_atlantic, labels=TRUE,label_color="white")+ theme(legend.position="top")+labs(color="Cases")
map5
dev.off()

map5

jpeg(file = "C:/Users/patel_m/OneDrive - US Department of Labor - BLS/Desktop/Presentation/NJ Cases.jpeg", width = 1050, height = 1050)
map6<-plot_usmap(data=us_map_data_2, values="cases", region="counties", include = "NJ",labels=TRUE,label_color="white")+ theme(legend.position="top")+labs(color="Cases")
map6
dev.off()

map6

jpeg(file = "C:/Users/patel_m/OneDrive - US Department of Labor - BLS/Desktop/Presentation/NJ Deaths.jpeg", width = 1050, height = 1050)
map7<-plot_usmap(data=us_map_data_2, values="deaths", region="counties", include = "NJ",labels=TRUE,label_color="white")+ theme(legend.position="top")+labs(color="Deaths")
map7
dev.off()

map7

jpeg(file = "C:/Users/patel_m/OneDrive - US Department of Labor - BLS/Desktop/Presentation/US Deaths.jpeg", width = 1050, height = 1050)
map8<-plot_usmap(data=us_map_data, values="deaths", color="white", labels=TRUE,label_color="white")+ theme(legend.position="top")+labs(color="Deaths")
map8
dev.off()

map8

jpeg(file = "C:/Users/patel_m/OneDrive - US Department of Labor - BLS/Desktop/Presentation/US Cases.jpeg", width = 1050, height = 1050)
map9<-plot_usmap(data=us_map_data, values="cases", color="white", labels=TRUE,label_color="white")+ theme(legend.position="top")+labs(color="Cases")
map9
dev.off()

map9